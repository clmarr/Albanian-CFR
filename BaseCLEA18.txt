$This one is cascade is based on the following: 
$ $ De Vaan, Michiel. 2018. "95. The phonology of Albanian". In Joseph, Klein and Fritz (eds), "Handbook of Comparative and Historical Indo-European Linguistics". 
$ Some liberties were taken in order to make sure rules apply as Michiel de Vaan seems to have intended; explanations will be given as deemed necessary. 
$ Kortlandt 1987 also implemented where aspects of it are not explicated by De Vaan 2018. 

$ STAGES: see periodization policy. 

$ This cascade will not explicitly encode De Vaan 2018's proposals (new, 
$ and retentions from older work, alike) for Proto-Albanian developments 
$ from Proto-Indo-European, yet at least (as of March 14, 2023). 
$ Other cites referenced are as follows -- 
$ $ $ Allen 1978 = Allen, William Sidney. 1978. "Vox Latina--a Guide to the Pronunciation of Classical Latin" (2nd ed.). Cambridge University Press. 
$ $ $ Bonnet 1998 = Bonnet, Guillaume. 1998. "Les mots latins de l'albanais". L'Harmattan. 
$ $ $ Çabej 1962 = Çabej, Eqrem. 1962. Zur Charakteristik der lateinischen Lehnworter im Albanischen. Revue de Linguistique (Bucureşti),  7:161–199.
$ $ $ Çabej 1986 = Çabej, Eqrem. 1986. Studime gjuhësore, volume I-VIII. Prishtinë: Rilindja. 
$ $ $ De Vaan 2004 = De Vaan, Michiel. 2004. PIE *e in Albanian. Die Sprache. Zeitschrift für Sprachwissenschaft, 44(1): 70–85.
$ $ $ Huld 1986 = Huld, Martin E. 1986. "Accentual Sttratification of Ancient Greek Loanwords in Albanian". Zeitschrift für vergleichende Sprachforschung, 99 Bd. 2 ː 245-253. 
$ $ $ Huld 1979 = Huld, Martin. 1979. An etymological glossary of selected Albanian items. University  of California, Los Angeles.
$ $ $ Lafe 2000 = Lafe, G. 2000. Der italienische Einfluss auf das Albanische. Zweiter Teil. Wörterbuch der Italianismen im Albanischen, in Ponto-Baltica, 10:31–120.
$ $ $ Landi 1989 = Landi, A. 1989. Gli elementi latini nella lingua albanese. Napoli: Edizioni Scientifiche Italiane. 
$ $ $ Marr 2023 = Marr, Clayton. 2023. The Angevin–Albanian element in the Albanian lexicon. To appear in Zeitschrift fur Balkanologie. 
$ $ $ Orel 1998 = Orel, Vladimir. 1998. Albanian etymological dictionary. Brill.
$ $ $ Orel 2000  = Orel, Vladimir. 2000. A concise historical grammar of the Albanian language: reconstruction of Proto-Albanian. Brill. 

$ "DV-NOTATION" for indexing De Vaan 2018 rules -- DV####.ɑβɣ##. -- DV for De Vaan, ### is page number, ɑβɣ is an alphabetic index in (A, B, C...) for each transformation on thepage (starting wiht A, etc...), and   the number is the line of that transformation on that page. 
	$ alternatively subsection title maybe used, with the alphanumeric iteration occuring within the section and not based on page breaks -- e.g. DV4.3F4 -- which is after a page break form DV4.3F3. 


$ this cascade is intended to simulate the development of Classical Latin loans into Albanian into the modern forms in Standard Albanian (a southern variant of Northern Tosk).
$ Despite this, it currently includes changes from Proto-Indo-European to Pre-Proto-Albanian (the form before the first wave of Greek), and then the pre-Greek to pre-Latin changes as well. 
$ These are essentially here for place keeping, in anticipation of work that incorporates multiple layers of the lexicon. 
$ These are to be ignored when simulating for ALLex because of newly programmed behavior triggered by having the start stage specified in the lexicon header. 

=Proto-Indo-European
$---------------------------Proto-Indo-European------------------------

$from De Vaan 1738-9, order may need to be revised. 
$for now, (somewhat arbitrarily) coding laryngeals as specific sounds 
	$ since we can't handle h1 h2 h3 etc. -- or otherwise we'd have to define these in SymbolDefs
$choose features closest to their coloring vowel . 
$ h for h1 -- no coloring effect negative for all feats (except cont.)	(or use ʔ ?) 
$ ħ for h2 -- -front +back -round -hi +lo --like a  
$ χʷ for h3 -- -front +back +round -hi -lo -- like o 
$ h2 and h3 can be minimally captured as +back,+cont
$ the three together can be captured for now as -cor,-son,+cont (unless we make h1 ʔ -- this is an argument not to) -- until any *f is developed. 
$ (x for Hamp's h4 if we need it? ) (or use h and make h1 ʔ ?) 	(or could use ? or h4) 
$ using j for i̯ and w for u̯
$ for the palatovelars : c ɟ ɟʰ
$ *a as it emerges is [ɑ], as this is ħ is closest to.

$DV1738~2.3C1 part 1, *e > *a ( really ɑ ) after *h2. Nothing listed for *h3 here. 
$ so most faithful formulation would be : [-hi,-round] > [+lo] / ħ __
$ but inasmuch as laryngeal vowel coloring is a widely accepted broad phenomenon of laryngeal-coloring within PIE, it is formulated explicitly in the way it is thought to work across branches; likewise it is expanded to include coloring by posterior laryngeals as well 
$ ultimately this is part of the implementation of the following: 
$   in the progressive coloring aspect: DV2.3C2, 2.3E2, 2.3F1, 2.3J2, 2.3K2
$   in the regressive coloring aspect: DV2.3E2, 2.3F1, 2.3G2, 2.3H1, 2.3J2, 2.3K2
[-hi,-lo,-round] > [βlo,ɣround,ðback,ɛfront] / [-cor,-son,+cont,βlo,ɣround,ðback,ɛfront] __
[-hi,-lo,-round] > [βlo,ɣround,ðback,ɛfront] / __ [-cor,-son,+cont,βlo,ɣround,ðback,ɛfront]

$DV1738~2.3C3 -- "*a < RHV" -- not sure I interpreted this right, he gives pare "first" as example; given the etymology in pr̩-h2-e/o I think he rather is intending for the R to pass to aR (...?), rather than it all to be absorbed into an *a which would be the literal interpretation of "RHV > a" by the system. 
$ this needs to be before 2.3A2 in order to get this effect for parë "first", so that is implemented. (also likely necessary to come before  the H-loss aspect of 2.3B1, 2.3C1, 2.3C2, 2.3E2 and 2.3F1, but this aspect of each will probably instead be handled by 1746.K4) 
$ Formulated so as to preserve maximal stress
$ 8/9/23 -- De Vaan confirms his 
∅ > ɑ / __ [+cons,+syl] [-cor,-son,+cont] [+syl] 
ɑ [+cons,βstres,ɣprim] > [βstres,ɣprim] [-syl] 

$Per general understanding of laryngeal behavior, laryngeals efface and lengthen prior vowels (after coloring them) when before consonants or the word boundary. This is touched upon in various DV'18 rules as an aspect, with each rule effectively handling the effacement of hte laryngeal and the ensuing prior vowel lengthening separately in parallel: 2.3E, 2.3G1, 2.3G2, 2.3H1, 2.3I1 -- but inspection of all the examples given show that while this is not explicated, all these VH cases are VHC or VH#, which is in line with the broad understanding of how this phenomenon occured across most core IE branches. 
$rules that are essentially accomplished here: the *iH > *i: aspect of 2.3E, 2.3F2 (fed by laryngeal vowel coloring), 2.3G1's eh1 > ē aspecet, 2.3H1's oH and eh3 aspects (the latter fed by laryngeal vowel coloring)
[+syl] [-cor,-son,+cont] > [+long] ∅ / __ {[+cons];#}

$DV1738~2.3C4 -- *h2 and *h3 become *a before syllabic resonants. Reformulated here so that stress is preserved and the resonants lose resonance in a single rule. 
$this may actually be multiple phenomena, with a later *o created by this rule or other phenommena involving h3 later merging to *a, but it's handled as one phenomenon by De Vaan 2018 it seems. It is actually simpler to let h3 pass to *o here and then become *a via 2.3C1 here though, so that's what this cascade does. 
$maximally faithful form without doing this would be: [+back,+cont] [+syl,+cons,βstres,ɣprim] > [+lo,-hi,-round,+tense,+voi,-strid,βstres,ɣprim] [-syl]
$based on the case of arë "field" given as an example, it seems this is not intended to be bled by DV2.3A1, so it is placed before it. 
[+back,+cont,+cons] [+syl,+cons,βstres,ɣprim] > [βstres,ɣprim,+tense,+voi,-strid] [-syl]

$PREVOCALIC LARYNGEAL EFFACEMENT: per general understanding of laryngeal behavior in late PIE as it differentiated (but which is generally understood to be all IE except Anatolian?), prevocalic laryngeals are now effaced.
$This is implicit in (and thus implements aspects of) the rules DV2.3B1 (actually in this case it's the whole rule), DV2.3C1, DV2.3C2 (the other aspect being the abovehandled laryngeal vowel-coloring), 2.3E2, 2.3F1, 2.3J2 (the rest handled by laryngeal vowel-coloring), 2.3K2 (as above) 
[-cor,-son,+cont] > ∅ / __ [+syl]

$DV1738~2.3A1 
$seems intended to counterbleed DV1738~2.3C4 as formulated above (?)
r̩ > r i 

$DV1738~2.3D2 -- wL̥T > uLT
$the rule formalism is expressed somewhat verbosely here to preserve any stress. 
w [+cons,+syl,βstres,ɣprim] > [+syl,βstres,ɣprim] [-syl] / __ [-son]

$DV1738~2.3.C7&C8 -- resonant nasals become a (really ɑ). Formulated more verbosely with feature matrices here so as to preserve existing stress. TODO check formulation for errors.
[+nas,+syl] > [+back,+lo,-cons,-nas,-ant,-lab,-cor,+lo]

$DV1738~2.3C5 -- any H becomes *a (ɑ) in C__C (C5). Incorporate part of C6, that which acts on *non-*syllabic resonants
[-cor,-son,+cont] > ɑ / [+cons,-syl] __ [-son] 

$DV1738~2.3C6: H becomes *a (really ɑ) in CR__C 
$formulated here so as to preserve any stress that was on the R, for the subset of cases where the resonant is syllabic (other part of this rule is handled above with 2.3C5)
$currently sequenced and formulated as if it counterbleeds DV2.3C4 as formulated above
[+cons,+syl,βstres,ɣprim] [-cor,-son,+cont] > [-syl] [+syl,+lo,-hi,-round,+back,βstres,ɣprim] / [-son] __ [-son]

$DV1738~2.3C9 calls for insertion of PPAlb a (really ɑ) in between two consonants, but if interpreted to be deterministic this would cause massive errors. The given example is madh "big" < *m̥ĝ, but De Vaan 2018 hedges here, noting that Schumacher 2013(: 238) instead explains this item via analogy. Thus this is not implemented for now. 

$DV1738~2.3C1 : PIE *(H)o > *a	(really ɑ) 
$ unspecified for any differene in the stress of the *o, but clearly it's the short one. 
$ the H deletion aspect is already handled above (cf. PREVOCALIC LARYNGEAL EFFACEMENT) 
$ this effectively also implements DV2.3J1 and DV2.3K1, and effectively the merged behavior of h2 and h3 in DV2.3J2 and DV2.3K2 (these now go from *oi and *ou to *ai and *au)
[+back,-hi,αstres,βprim] > [+front,-round,αstres,βprim]

$Bandaid: loss of syllabicity for remaining syllabic resonants after adjacent to syllabic elements
$This also forms the diphthongs from V {i,u} sequences that might have arisen, thus implementing the final parts of 2.3J2 and 2.3K2 and medial parts of 2.3E2 and 2.3F1
$ formation prior to 8/5/2023 was: {[+cons];[+hi]} > {[-syl];[-syl]} / [+syl] __
$ however this had to be changed to sidestep then-current issue in DiaSim. TODO consider restoring when this is resolved. 
[+cons] > [-syl] / [+syl] __
[+hi] > [-syl] / [+syl] __

$DV4.3I3 -- *Tt > *tʃ too. The single example pot-to is a dental stop; to resolve conflict between this rule and DV4.3Q3, I refer to the examples given by De Vaan 2018 in the latter, and these include -pt-, -ct-, and -kʷt- but on dentals. Given the past literature on the "thorn cluster", it makes sense to assume that this one targets a dental cluster, and effacement rule in DV4.3Q3 which would naturally compete with this, is place-independent and comes later -- in effect targeting non-dental stop
$ conference with De Vaan - -yes this is dentals, yes it comes before 4.3Q3
[+ant,-cont] t > t͡ʃ

$DV2.3G3.I -as- and -es- ultimately to -ā- (really ɑː) before l, n, or r. 
$This can be handled as s-effacement with compensatory vowel lengthening here, as there is a later ē > ā shift (DV2.3G3.II) 
$merged in: 2.3I2 ~ PIE *-us- > ū / __ {l,r} 
$going to boldly assume this happened to all vowels since there are no counterexamples for -is- and -os- 
$TODO modify this if it doesn't work so as not to misrepresent. 
[+syl,-cons] s > [+long] ∅ / __ [+cor,+son]

$DV4.3Q5 -- s effaced before l,m,n,r -- so, sonorant consonants. 
$this also handles DV3.3A3 = DV1741A3 
$but this must come after DV2.3G3 and DV2.3I3 so as not to bleed their vowel-lengthening aspects. (if this is all more broadly conceived as vowel lengthening this could be of interest as it is also attested for Doric, Ionic and Attic)
$grouping this also with effective loss before "medial" d and dʰ implicated in Kortlandt 1987 -- 
$per Kortlandt 1987 p220 s5iii -- medial PIE *-sd(h)- (he seems to mean intervocalic for "medial") yielded the same reflex of *-d(h)- in -dh- (=/ð/) -- but the *s needs to be gone to feed this! 
s > ∅ / __ {[+son,+cons];d;dʰ}

$$ consonantal stuff from PIE to (PG) PPAlb follow -- De Vaan 4.3, pp1745-6
$ treatment : palatovelars are handled as c, ɟ, ɟʰ respectively 

$DV1745~4.3E1 & ~4.3F1 -- depalatalization of *k̂ and *ĝ before resonants (examples are the liquids l and r). He does not list this occurring for *ĝʰ it seems 
[-cont,+hi,-sg] > [-front,+back] / __ [+cons,+son]

$DV1745~4.3F2 -- depalatalization of *ĝ after n (case of ankth)
ɟʰ > [-front,+back] / n __

$DV1745~4.3D2: the dimer/dore/derr rule
$ TODO consider making this go to dʰ instead? Or just reformulating this/explaining otherwise
ɟʰ > d / # __

$DV4.3J3 reflex of  ɟʰw- merges into the outcomes of labiovelars before front vowels, even when not before front vowels
$merge with DV4.3J1 -- this happening to dj and dʰj- 
$and merge w. DV4.3I1 -- this happening to tj 
$but note that DV4.3J1 and DV4.3I1, if they don't happen here, will be covered later when the same change impacts Latin loans -- TODO consider using the MINIMAL VERSION below instead (which implements only DV4.3J3) to test if this is a better way to do things... 
$ ɟʰ [-cons,+round,-syl] > d͡ʒ $-- MINIMAL VERSION
$ formation prior to 8/5/2023 was: {ɟʰ w; [+cor,-cont] j} > [+delrel,+strid,-ant,+distr,-hi,+front] ∅
$ however this had to be changed to sidestep then-current issue in DiaSim. TODO consider restoring when this is resolved. 
{ɟʰ w;t j;d j;dʰ j} > {d͡ʒ;t͡ʃ;d͡ʒ;d͡ʒ}

$DV4.3G1 & H1 -- unless in aforementioned bleeding conditions, the (non-aspirated) c and ɟ affricate to what De Vaan 2018 notates as *t͡ɕ and *d͡ʑ; *c͡ɕ and ɟ͡ʑ are more conventional from a phonetic perspective; this cascade uses *c͡ç and *ɟ͡ʝ as this assumes a change in one less feature (strid)
$ De Vaan 2018 treats *c and *ɟ differently here from *ɟʰ, which is handled below. 
[-cont,+front,-sg] > [+delrel]

$DV4.3H2 -- intervocalic *ɟʰ is affricated
ɟʰ > [+delrel] / [+syl] __ [+syl] 

$DV4.3H3 -- *dʰɟʰ results in a palatal affricate
dʰ ɟʰ > ∅ [+delrel]

$DV2.3G1 ē > ā (really ɑː)
$must precede 2.3H1 which doesnt feed it
$note that Orel has a different view, wherein the merger of ē and ā is only completed much later, but De Vaan 2018 reasonably notes AGrk spēlaion > shpellë which could imply it at least must precede the Ancient Greek later. 
$this also accomplishes the last aspect DV2.3G3
[+long,+front,-hi] > [-front,+back,+lo]

$DV2.3F1 eu (really ew as handled here) to ē 
$ for mechanical reasons must come before DV4.3Q2 which effaces w potentially, not to mention DV4.3L1 which fricates it.
[+front,-hi,+syl] w > [+long] ∅

$DV2.3E2 ei (really j now due to handling of hiatus high vowels above; from various sources) to ī. 
$for mechanical reasons should come before DV4.3Q1 which effaces j
[+front,-hi,+syl] j > [+hi,+long] ∅

$DV1745~4.3E3 & DV(1746)~4.3F4, the delabialization of labiovelars before what amounts to an elsewhere condition (a, back/round vowels, and the word boundary), will be similarly handled after the primary palatalization of them before front (tense/non-low) vowels -- i.e. DV4.3I2 & DV4.3J2

$DV4.3I2 & J2 -- fronting of pre-palatal-vowel labiovelars into what are (ultimately) affricates, done (for each voicing status) in one step in DV'2018 (this is merged into a single step here). In this one, the aspiration of the voiced stop in PIE makes no difference. Furthermore, he puts the superscript "w" in parentheses but the meaning of this is unclear is it does not seem that he intends for the PIE plain velar series to be impacted by this. TODO disambiguate this point in email -- confer with De Vaan, that is. 
$TODO -- point to consider for view that PPAlb reflexes of PIE plain velars were further back than the labiovelars?... and distinction between ɟʰ and ɟ  ?
$TODO note -- this has to be before any changes that make the reflexes of PIE *j,i,ī,e,ē something other than front and non-low. 
$TODO considerations here on roundness annotation/specification for postalveolar fricatives? 
[-cont,+round] > [+delrel,+strid,+distr,-hi,-back,+front,-round] / __ [-cons,+front]

$DV3.3A4 = DV1741A4: n > m / P __ 
n > m / [+lab,+cons] __
$DV3.3A2 = DV1741A2: effacement of stops before *m
[-cont] > ∅ / __ m

$DV4.3Q3 (=DV1746K3) -- effacement of stops before t, which I infer should be bled by DV4.3I3 (see notes for that rule) 
[-cont] > ∅ / __ t

$DV4.3Q1 & Q2 : intervocalic glides effaced. As pertains to /w/, I infer that this naturally competes with its frication rule (DV4.3L1), and that this one is intended if anything to have priority ,based on the example provided in ve "widow" < *h¹u̯idhʰ1eu̯eh²
[-cons,-syl] > ∅ / [+syl] __ [+syl]

$ DV4.3E3 & DV4.3F4 after labiovelars palatalized before front vowels (further above, DV4.3I2 & J2),  what's left of the labiovelars lose their labiality -- 
$TODO but note -- actually this doesn't need to happen until after the Latin loans, since it happens to all Latin labiovelars as well! 
$ Thus may suppress this rule here with no consequences... and it may not be necessary to assume it either. 
[-cont] > [-round]

$DV1745~4.3~D3 -- *d from *sw- before a stressed vowel...  DV'18 asserts this for diell (< su̯él ) , dergjem "I am ill" (< su̯órgh); dirsë "sweat" -- as also in Kortlandt 1987 p219 s3. 
s w > d / __ [+stres]

$DV2.2.1E3 stressed vo- > u, but based on the example this seems to be vō- too. 
$TODO IMPLEMENT OR DIA: probably delete this, or merge it with DV2.1F2.
w [+prim,-hi,+round] > ˈu / # __

$DV4.3L1 frication and develarization of w to De Vaan 2018's PPAlb *β
$TODO note for DIA though: there is no need for this to happen twice, as it also occurs later (DV1744.C1) 
$ however this is clearly not intended to affect the [w] in what De Vaan notates as *au diphthongs, so this is fixed with a bandaid. 
w > ʊ̯ / [+lo,+syl] __ [-syl]
w > β

$DV4.3K1 *sp > *f,-- cf also Kortlandt 1987 p220 s5i
$merge with DV4.3L2 *sw (now *sβ per my sequencing here, since DV4.3L1 is placed beforehand) > *β -- cf. also Kortlandt 1987 p220 s3.
$merge also with DV4.3O1 *sk > x-- cf also Kortlandt 1987 p220 s5iii 
$ these can be unified in a single rule so I am doing so, with the cost of two assumptions
$ $ 1) we have a PPAlb *ɸ at this stage not *f as a small cost -- especially considering that the labiodentalization of ɸ can be easily handled in tandem with the later moving of β to v (and this also better matches the general timing for the emergence of labiodentals in the area too, e.g. Greek) 
$ $ 2) there are no sg or sgʰ clusters at this point... which I don't think there are. 
$ TODO DIA NOTE -- for own uses, explore using instead a stage of sw>ɣʷ (requires outcome of ∅ [+cons,+cont]) or even w (just ∅ [+cont]), which does not require redundant loss of labiality.
s [-son,-cor,-front] > ∅ [+cont]
$ originally "> ∅ [+cons,+cons]" 

$DV4.3G2 (and Kortlandt 1987 p219 s2) -- s "dissimilates" before Vs; in Kortlandt 1987 p219 this goes straight to θ but Kortlandt'87 generally works in terms of ultimate reflexes without excluding intermediate forms; De Vaan'18 has it go to the intermediate *tɕ (which for reasons discussed above is cç in this cascade). Inasmuch as this has to happen before that following s is about to be mutated, we're working with what De Vaan asserts the ancestor of θ to be at this time -- namely, the aforementioned affricate. Phonetically of course this compromise is suspect (the segment asserted by De Vaan, unlike the one being used as a proxy here, actually is a sibilant and a strident...) but that the details here can be worked on later. 
s > c͡ç / __ [+syl] s

$handling of DV4.3M & N -- De Vaan 2018 has *s developing into *ʒ before a stressed vowel (N), and developing into *ʃ in a wide variety of places (M)
	$ M1 (before unstressed vowel, 
	$ M2 intervocalic -- no explicit handling of about potential rule competition in the context V __ V[+stres]?) -- TODO confer over email on this? 
	$ M3 in __ T 
	$ M4 in k __ t (absorbing the k) 
$ he states his account here is based on Kortlandt 1987 
$ Kortlandt 1987 is indeed mostly in line with this, with a few details different: 
$ $ w. r. t. N -- Kortlandt 1987 S2 (p219) doesn't explicitly posit a PPAlb *ʒ, just noting that gj- reflects *s before a stressed vowel (Orel 1985 p279 explicitly rejects the role of the stressed vowel, for reasons Kortlandt in turn rejects)
$ notes Schumacher 2013 pp258-65 also as an "extensive discussion with partially different views" 
$ anyhow, for now, it seems this can be handled in much fewer than five rules -- just two, with the pre-tonic voicing being last, a development imposed on *ʃ, *ʃ itself being the "elsewhere outcome" of *s after the other rules impacting it have been applied
$This seems supported by the view in Kortlandt 1987 (p.221) that more explicitly treats ʃ as the "elsewhere" outcome -- "it seems that PIE. *s yielded sh in all other positions..." 
$ -- that is Kortlandt, Frederik. 1987. PIE *s in Albanian. Studies in Slavic and General Linguistics. 10: 219-226. 
$ perhaps check also Schumacher 2013 = Schumacher, Stefan. 2013. Historische Phonologie. In Stefan Schumacher and Joachim Matzinger (eds.). Die Verben des Altabanischen. Belegwörterbuch, Vorgeschichte und Etymologie. Unter Mitarbeit von Anna-Maria Adaktylos. Wiesbaden: Harassowitz, 205-276. 
$ first part was originally (before 8/5/23): (k) s > ʃ 
$ this had to be changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when this is resolved. 
{k s;s} > {ʃ;ʃ}
ʃ > ʒ / __ [+stres]

$DV4.3K2 *tp- > ft- (perhaps after some schwa losses?) 
$using φ  for reasons explained in formalization for DV4.3K1 
$TODO ɸ -- need to incorporate ɸ > f into any β > v shift. Can remove this note only when that is done. 
t p > ɸ t 


$ ----------- Pre-Proto-Albanian = pre-Greek proto-Albanian. --------------
=Pre-Proto-Albanian

$ rule to capture movement of native and Greek aː to ɔː -- for benefit of the doubt, borrowing Orel's usage of ɒː to allow this to not to pattern with Latin aː while respecting the chronology of vocalic developments on De Vaan p1736. So here we have aː > ɒː. Note also DV1739.A4 where Doric mākhānā is listed here. 
[+long,+lo] > [+back,+round]

$ general rule for De Vaan(:1747) is no change in stress placement: by default, Latin loans have the same stress placement as in Classical Latin, "and the same goes for loanwords from later layers... Slavic, Italian... Greek... Turkish". Exceptions seem to be largely morphologically motivated (see bottom of p1747); De Vaan (1747) agrees with Matzinger 2006 that things are too complicated for Jokl 1923's treatment of PPAlb as having general penultimate accent. 

$DV1744.E2 not affecting Latin words, *intervocalic* *d to edh, perhaps with ability to see through r. (later change that DV'18 asserts affects Latin words too, has r not as optional but necessary, and is thus not intervocalic, with Latin intervocalic d being lost in Albanian in this account). Since De Vaan treats the intervocalic lenition as pre-Latin and a separate sound change with no explicit mention of r (optional or not) in the context, so will it be handled here.
d > ð / [+syl] __ [+syl]

$DV1744J2 (=4.2Q2) -- some PAlb *ð < PIE d / V __ V becomes *j. But this does not seem intended to be deterministic(?) as while ujë "water" and the aorist -jt- are cited, DV1744E2 also has (-)dha "gave" and lodhet "to tire" cited. Some other sources do not have ujë "water" coming from something with an intervocalic *d though: Orel 1998 (:483) assets a PAlb *udrjā akin to Greek hydría "water bucket", in line with Camarda, Gil'ferding and Hamp 1965(:138); Huld 1976(:197) seems largely favorable to this and puts *udr-iom as his own form. Meyer 1891(:456) had *udni̯ā; Pedersen 1897(:286) and Tagliavini (1937:237) accept this but Huld 1976(:196) does not on the basis of the lack of any nasal traces in Arvanitika, a similar criticism to that voiced by Orel 1998. La Piana has ujë < ulë < ud-l-o. Demiraj 1997 (:401-2) asserts a PAlb *urjā citing Skt. vār- "water". Çabej 1967(:70-2) seems to say what De Vaan 2018 is saying here, except in that the -j- arises later in hiatus after the fall of intervocalic -d- in native words, which apparently Çabej 1967 considers more widespread than does De Vaan 2018 (?). 
$TODO reexamine this considering the above. Also perhaps confer with De Vaan on what was intended here.
ð > j / [+syl] __ [+syl] 

$DV4.1B2 -- m to b before l -- DV'18 lists bluan "to grind" < mleh1-, bletë "bee" < *m[e]lit? (question mark in the original) -- given the second example, there may have been some vowel effacement before this point? But DV'18 does not attribute this outcome for Latin loans into Proto-Albanian, and indeed they don't seem to show it exactly (e.g. simulatūra > shëmbëlltyrë etc.) 
m > b / __ l

$DV1740.C5 = DV3.2C5 : PPAlb *-nt- > PAlb -n:- (ultimately) in apparently uncertain conditions: "-nt- (3pl., acc.sg.) in post-tonic syllable (?) or retention of the cluster (Janson 1986: 96,154)" -- implementing the post-tonic part here since it was listed, 
$ -- actually post-tonic means anything after the primary stress (meeting @Aug 9, and is okay with having this as baseline)
$ This is not intended to affect Latin loans.
$ nn > n: later. 
t > n / [+prim] (@)* n __

$DV1740C4 = DV3.2C4 : PPAlb -nd- > -nn- ; implemented like above. 
$This is not intended to affect Latin loans, clearly.
d > n / n __

$DV1743.F2 : PPAlb *j before a stressed vowel -- but not the *j that is a glided Latin initial i,e
j > ɟ / __ [+stres]

$DV2.2.1A4.I: PPAlb *e and Latin ē raise to ultimately *i "sometimes" when before sh -- Latin short e not listed, even though PPAlb *e patterns with Latin short e elsewhere (general outcome: 2.2.1B2; i-mutation outcomes: 2.2.1A3; in CL_ : 2.2.1B1).
$ Way to handle this might be to lengthen PPAlb *e in this context here so that it will merge with Latin ē, and then have a second part of this rule (2.2.1A4.II) later  
$ NOTE FOR DIA : The example given for Latin ē could instead be handled as triggered by the following glide actually, as it works for ecclesia > kishë and bestia > bish(t)ë, but not vēscus > veshk, rēstem > rrjesht, ēsca > eshkë or quadrēsima > kreshmë. 
ˈe > ˈeː / __ [+cor,+cont,+strid]

$ DV4.2Q4 : j inserted before word initial *e- 
$ use of the * in the original suggests this is not Latin words targeted, and the example of jashtë suggests it precedes a-mutation (below). 
∅ > j / __ [-hi,-lo,+front,+syl]

$DV2.2.1C2: PPAlb *e (but not Latin short E?) undergoes a-mutation, cf. De Vaan 2004: 78-83. Placed here as it apparently doesn't happen to Latin.
$ per De Vaan 2004(:78-83), this is actually going to ja, not simply ɑ, so that is reflected in tihs rule (this also supports the apparent limitation of this development to the pre-Latin stratum) 
ˈe > j ˈɑ / __ ([-syl])*  

$DV2.2.1A1: PPAlb *i, unlike Latin I, reflects as PAlb *i without qualifications, as do PPAlb *ī and Latin ī (2.2.1A2,A6), but not Latin I, which reflects as PAlb *e generally (2.2.1B11) except when under i-mutation (2.2.1A5), wherein it behaves quite similarly to Latin E and PPAlb *e (2.2.1A3)
$The best way to handle this for now, without changing all the Latin inputs (but: note that based on Classical Latin and Romance phonology, these short I-s plausibly *could* be either [ɪ] or [e])... is to lengthen all PPAlb *i just before Latin. This is no issue because there does not seem to be any difference in the behavior of PPAlb *ī and *i anyways
$note that for this to work, the *i present as the second element of diphthongs must already be [j] by now. 
$note that this is NOT a proposed sound change, but a temporary solution to the issue. (and even replacing the Latin short I instances with [ɪ] or [e] might not work to fix it, because even though it does have a basis in both Classical Latin and Romance phonology, it still might cause issues regarding this short I's role as a trigger of i-mutation -- TODO consider that and make remarks here) 
[+hi,+front,+syl] > [+long]

$--------------------Antique Proto-Albanian----------------------
=Antique Proto-Albanian

$$|| Latin Input handling|| 
$  rules following here are not core aspects of De Vaan 2018's proposed rules, 
$	but they are necessary to get the right outcomes,
$	i.e. to prevent errors that are "uninteresting"
$	some are drawn from our knowledge of what was going on within Latin
$	they are certainly subject to inspection and possible critique
$	many are nonetheless clearly assumed by De Vaan 2018 in terms of how he treats the nature of the input to rules he does explicate

$ Deaspiration: this may or (more probably) may not have been contemporaneous with the merger of PIE aspirate voiced stops into 
$	simple voiced stops, but clearly Greek loanwords in Romance with aspirate voiceless stops became simple voiceless in/by the 2nd cent CE
$		cf. Pope 1934 p226 s629
$	however inclusion in the Albanian cascade is specifically justified by the treatment of OGr loans into Albanian by De Vaan 2018
$		e.g. De Vaan 2018 p1739 ~ DV1739.A4 -- mokër "millstone" Doric *mākhānā
$ corresponds to Orel 1.4.7.1 
[+sg,-cont] > [-sg]

$ 'y' becomes i, likewise for the long-variant (praebyter > prift, etc.) 
[+front,+syl] > [-round,-lab]

$ Latin(-internal?) NASAL FRICATIVE PHENOMENON : Latin nasals lost before fricatives, making a prior vowel long if there was a prior V. 
	$ an input assumption for DV1735.D4. wrt krushk "in-law" < CONSOCER 
	$ some assert these long V-s would have gone through a stage of nasality for the vowels, but De Vaan does not consider this 
		$ relevant for Albanian outcomes
		$ inquiry into whether occasional Gheg nasality in these places (there are some 20-30 relevant words, at least can 
		$ be systematically handled would be interesting
	$ cf Pope 1934 s359 (as a "very early" phenomenon in Latin), also p73 s156ii; also Allen 1978(:27-31, 55-6). 
	$ different handling in corresponding Orel 1.4.7.13 on p115 in ns > ʃ
	$ this should not be formulated and sequenced so as to be fed by De Vaan 2018's one step passage of his PPAlb *tɕ *dʝ > *θ *ð (as this is not indicated), so that is placed afterward 
[+syl] n > [+long] ∅ / __ [-son,+cont]

$ -- end of Latin input handling --- 

$Latin ae basically always falls in with Latin short e so that is handled early on here -- thus implementing parts of the following: 2.2.1B1, 2.2.1B2  
$ this is not outright stated for 2.2.1A3 (i-mutation on Latin e) but there are no counterexamples, while praebyter > prift may actually be an example. 
$ however this could possibl counterfeed 2.2.1C5 (caelvm > qiell), depending on how it is construed -- however currently it will be bled for that word by the development of L (probably correctly) 
[+lo,βstres,ɣprim] e̯ > ∅ [-tense,βstres,ɣprim]

$per Kortlandt 1987 p220 s4 -- final s is deleted. This has to be after the dissimilations (thi for PIE ancestor of Lat. sūs) but before delabialization ū, Kortlandt argues. De Vaan 2018 doesn't list this rule and asserts that nouns tend to reflect the accusative (which Bonnet 1998 seems to agree with), but this is included at this place (after the first Latin wave) to enable nominative forms in the lexicon as well as other words ending in -s, from Latin, Ancient Greek, and PIE alike. Note that Kortlandt 1987 opposes the view that *s went to *h or to ∅ (via /h/ or otherwise) in any other position (contra Jokl 1937, Meyer 1891, Pedersen 1900 , probably also Orel 2000), which includes retracting his earlier 1986 published view on intervocalic *s reflecting as nothing (but cf. nosom > nahe > na?). Given De Vaan 2018's reference to Kortlandt 1987 as its main source of *s developments (TODO check this in correspondence with De Vaan?), this view is adopted within this cascade, for now at least. (Kortlandt's lexical-etymological views are not adopted unless explicitly endorsed by De Vaan 2017, as with deriving the modern Albanian proximals ky,kjo,këta,këto from Latin ECCVM, also the source of these velar proximal elements across Romance) 
$ ʃ and s both included to allow flexibility in placem
[+strid,+cor,+cont] > ∅ / __ #

$DV1744.D & DV1744.E1  --*tɕ *dʝ > *θ *ð -- for De Vaan, these happen in one step, without intermediate stages in alveolar or dental affricates. 
$ symbol defs and the IPA don't (most typically) use *tɕ *dʝ, these are expressed with c͡ç and ɟ͡ʝ for reasons discussed above in the formulation for DV4.3G1 & H1 
$ needs to come after the nasal-spirant law above in Latin input handling so as not to feed it. 
$ However, in light of the fact that Proto-Albanian loans reflecting PIE palatovelars reflect as ts dz in Aromanian and various ts s z in Romanian (unlike PAlb ð < PPAlb *d, which reflects with d in Romanian and Aromanian), this is indeed split in two, with the affricate stage first, and the spirantization only after Middle Proto-Albanian (when De Vaan assigns the contact between Proto-Albanian and Proto-Vlach)
{c͡ç;ɟ͡ʝ} > {t͡s;d͡z}

$DV1740I1 -- initial PPAlb and Lat. r- becomes "*r:"; merges with the reflex of PPAlb initial *wr- (DV1740I2)
$form prior to 8/5/23 was: (w) r > rː / # __ 
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved. 
{w r;r} > {rː;rː} / # __

$DV1740I3 -- internal Lat. -rr- becomes PAlb *r: as well. 
r r > rː 

$DV1740G3 -- PPAlb *-rj- to ʎ. Does not seem (?) intended to be fed by gliding of Latin i,e in hiatus to j, which is below (GLIDING) -- Latin to PAlb etyma listed by De Vaan are clearly unaffected (altarivm p1737; febrvārivs p1745...). Cited to Bonnet 1998: 208ff; Matzinger 2006: 74. 
$ can be put here before the gliding of Latin i,e. 
r j > ʎ / @ __ @

$$ De Vaan 2018 has the change in vowel length to quality only come after major PPAlb to PAlb developments -- see p1736 -- namely long round vowel fronting, ai > ē, and aː > ɔː. -- will be handled in next stage

$ GLIDING -- gliding of unstressed /i/ and /e/ in hiatus with a following vowel to [j] -- cf. Pope 1934 s220. This is attested early but not trivially early -- it is in the Appendix Probi, as Pope 1934(:s220) notes. De Vaan 2018(:1744) seems to implicate this had occurred 
$ by listing DIĀNA and GAVDIVM as having Latin -dj- and likewise -tj- for PUTEVS, VITIVM, PATIOR, and MARTIVS. However, this needs to 
$ be placed before the fates of intervocalic obstruents are handled, as De Vaan does not seem to treat words like GAVDIVM as having 
$ intervocalic -d-, for example, and this does clearly bleed his proposed rules for intervocalic /d/ in particular, if we assume its 
$ accuracy. Likewise these must also come before De Vaan 2018(: 1740)'s rules for Latin intervocalic /l/, as they feed the formation 
$ of PAlb *ʎ and *ɲ, and bleed the formation of *l:.  
$ for convenience, and given Pope 1934(:s220), and given that forming a broad rule is trivial here, the same is done for /u/ and /o/. 
	$ inasmuch as Latin orthographic V was used for both, there is perhaps mild support for De Vaan 2018 also having this here, 
		$ as informed by the handling of betacism of V (De Vaan 2018: 1744 -- DV1744.C1) 
[-lo,+syl,-prim] > [-syl,+hi,-long] / __ [+syl]

$ DV1740G1 : intervocalic l becomes ʎ before front vowel.
l > ʎ / [+syl] __ [+syl,+front]
$ DV1740G2 : l j > ʎ in PPAlb and Lat. Seems intended to be fed by hiatus vowel gliding. 
l j > ʎ

$DV1740F3 -- Lat *l > l: / V __ V[-front]
$ as long as the lambda forming rule DV1740G1 is placed before this, [-front] does not need to be explicated, which is useful because [a] may technically be treated as front depending on the current convention for Latin on the input side, but this does appear to occur before [a] ? (or not?) 
$ Combined with DV1740F1 ~ PPAlb *l, *sl > l: / V __ V[-front] 
$ form prior to 8/5/23 was: (s) > lː / [+syl] __ [+syl]
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved. 
$ TODO FOR DIA : consider just having this go straight to dark L 
{s l;l} > {lː;lː} / [+syl] __ [+syl]

$DV1740E3 -- Lat ll > PAlb l. As [l] is a resonant, this will be totally bled by DV1740F2 if not placed before it.
$merge with DV1740E1: PPAlb ln > PAlb l; placement for the same counterbleeding reasons.  
{l;n} > {∅;∅} / l __ 

$DV1740F2 -- l and a nearby resonant (Rl, lR) merge to become *l:. De Vaan lists parabola -> përrallë as his third example wihch would imply a treatment of /β/ (perhaps? if not /b/?) as a resonant, which could cause problems, but actually parabola > përrallë can be perfectly handled if it is placed before the fall of unstressed vowels.
$ but this must be placed after DV1740E3 and DV1740E1 as otherwise it would completely bleed them.
$ form prior to 8/5/23 was: {[+cons,+son] l;l [+cons,+son]} > lː
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved.
[+cons,+son] l > lː
l [+cons,+son] > lː

$merger of three rules: DV1740.D1 -- PPAlb nj > ɲ; DV1740.D2 PPalb and Lat *gn- and -gn- > ɲ; DV1740.D3 -- (glided) Latin nj > n (from n (i,e) V) 
{ɡ n j;ɡ n;n j} > {ɲ;ɲ;ɲ}

$DV1740.D4 Lat -ng(u-)>ɲ / __ V[+front]
$ form prior to 8/5/23 was: [+nas] [-cont,+back,+voi] ([+hi,+round,-cons]) / __ [+front,-cons,+hi]
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved.
[+hi,+round,-cons] > ∅ / [+nas] [-cont,+back,-voi] __ [+front,-cons,+hi]
[+nas] [-cont,+back,+voi] > ɲ / __ [+front,-cons,+hi]

$DV1740H2 -- rC, Cr > r. 
$ This one is likely very bugged and needs either suppression or massive fixes-- suppressed, in conference with De Vaan 8/9/23
$ TODO long term - -consider only applying it for -rs- and -sr- for pre-Latin etyma 
$ r [+cons] > r 
$ [+cons] r > r 

$   ------------- INTERVOCALIC STOP EFFACEMENT -----------
$ effacements of intervocalic stops and /w/ follow (I'd note they were perhaps all phonetically fricatives at the time they were effaced, cf Pope 1934 on Latin /w/ as [ɣʷ], as noted in BaseCLEF) 

$ effacement of intervocalic /d/, per De Vaan 2018(: 1745 -- DV1745.A4) 
$	$ He asserts that native Proto-Albanian */d/ had a different fate in the same environment, 
	$	becoming /ð/ only after /d/ in Latin words was effaced, 
	$	with the same also occuring for both native and Latin /d/ in V__r (see De Vaan 2018: 1744)
	$ per p1745, he does explicitly propose that Latin intervocalic /d/ also became [ð] before disappearing, 
	$	but before this happened to native intervocalic /d/, and both in V __ r. 
	$ De Vaan 2018(: 1743) also explicitly asserts these passed trough a stage of *ð. 
$ $ note that this account is rival to Orel 2000(:105)'s view that Latin D shared the fate of Proto-Albanian *d in both V __ V and r __ Vs
$ $ The etyma cited by De Vaan 2018 as evidence for this are counterexplained 
	$ for gjyq, bekoj and jek -- by the view that voiced stops were effaced in secondary clusters caused by the internal vowel loss  
		$ cf. Bonnet 1998(:166) 
	$ and for fe and pre being counterexplained as possible later Angevin loans (Marr 2023) 
	$ counterexamples noted by Orel 2000 and Marr 2023 include modh < MODVS, prodhoj < PRŌDĀRE, predhë < PRAEDA, adhuroj/adhëroj < ADŌRĀRE
d > ∅ / [+syl] __ [+syl]

$ DV1744.E4 -- Latin d becomes edh after r (as with PPAlb d -- DV1744.E2) 
d > ð / r __

$ De Vaan 2018 (: 1745.A4) -- Latin /b/ is deleted both (DV1745.A2) intervocalically and (DV1745.A3) in V __ r 
	$ he explicate the prior vowel in DV1745.A3 (it's just " __ r") but all cases he lists 
	$ are actually V __ r V, and I don't think Latin has any C b r C strings, let alone those that would have made it into Proto-Albanian 
	$ for (b) he lists farkë "smithy" < FABRICA, OGeg fëruor "february" < FEBRUĀRIVS, kushëri "cousin" < CŌNSOBRĪNVS, harr-o- "to  forgot < ABERRĀRE
	$ for (a): buall "buffalo" < BUBALVS, djall "devil" < DIABOLVS, i/e lirë "free" < LIBER, kut "elbow" < CUBITVS) 
b > ∅ / [+syl] __ (r) [+syl]

$ De Vaan 2018 (: 1745 -- DV1745.A1) -- loss of Latin /w/ intervocalically: cf. qytet 'city' < CĪVITĀTEM, njerkë "stepmother" < NOVERCA
w > ∅ / [+syl] __ [+syl]

$ p1743 -- w > b after r and l. But at this point, these are the only coronals w can come after.
w > b / [+cor] __

$ De Vaan p1743-4 -- w dropped between k (DV1743.G2) or g (DV1744.A2), and vowels. This will eventually feed the palatalization of these velars before i/e/y (p1743) but this feeding does not have to be explicitly coded in. 
$ form prior to 8/5/23 was: {[-cont,+back] w;[-cont,+back,+round]} > {[-round] ∅;[-round]} / __ [-cons] 
$ was formulated so as to handle if these are treated instead as labialized consonants (alas in practice the format in ALLex currently is always "k w" and "ɡ w", not "kʷ", "ɡʷ".) 
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved.
$ in practice qu- and gu- never occur without following vowels, so it can be expressed without the following vowel. 
w > ∅ / [-cont,+back] __

$ DV1744.C4 -- emergence of PAlb β before Latin long ō and the reflex of Alb long-ā, but PPAlb ō is not listed. PAlb β itself is the reflex of initial Latin w- and PPAlb β, itself from a PIE u̯. Treat as w for now, betacize later, as then merge them here, with a single rule. In order to impact PPAlb ā and Latin ō but not PPAlb ō, PPAlb ō must have a different reflex at this stage. But De Vaan 2018 does not seem to PPAlb ō and Latin  differently otherwise, in fact they are typically handled together (cf. DV1736G1, DV2.2.1B7 & DV2.2.1B8) except when i-mutation is concerned (DV1736H1, which can simply be handled by placing it in the post-Greek but pre-Latin area of PAlb). So unless there are issues that emerge upon later examination, we will be treating PPAlb ō as potentially a trigger as well.
∅ > w / __ [-hi,+round,+long]

$ DV1744.C1 : Lat. w- > β. 
$ TODO NOTE FOR DIA: this is redundant with the earlier rule doing the exact same thing to PIE u̯ > PPAlb β (DV1746.F1 = DV4.3L1) 
w > β / # __

$ DV4.2F4: Lat. i- merges with PPAlb *ʒ as PAlb *ɟ; PPAlb *ʒ as PAlb *ɟ as implementing DV4.2F1
$ TODO FOR DIA ? : consider merging this with the j- > ɟ for PPAlb j-, and explain j reflexes of Latin glided i- (janar etc?)
j > ɟ / # __
ʒ > ɟ

$ DV1740.C1 & C3 (merged) -- -Tn- and -sn- > n:. Listed only for PPAlb not Latin; since no Latin etyma loaned to Albanian have these clusters before the vowel falls start, it is placed before them. 
$ The -nn- clusters from loans and also earlier assimilations are also swept up in this on purpose. 
$ DV1740.C2 merged in too -- -Kn- affected as well. But this should be interpreted as just targeting -kn- and not -gn-, because in DV1740D2 De Vaan notes that PPAlb and Lat gn- and -gn- clusters instead go to ɲ. Latinate loans into PPAlb have no -kn- clusters before the vowel drops, so it makes sense to implement this here. 
$ form prior to 8/5/23 was: {[+cor,+ant,-son];n;k} n > nː
$ was formulated so as to handle if these are treated instead as labialized consonants (alas in practice the format in ALLex currently is always "k w" and "ɡ w", not "kʷ", "ɡʷ".) 
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved.
{s n;t n;d n;n n;k n} > {nː;nː;nː;nː;nː}

$ k becoming yod before /t/ if next to front vowel -- De Vaan 2018(:1744)  -- DV1744J3
	$ potentially IMPORTANT: what frontness should we treat /a/ as having at this point? For the inputs to Gallo-Romance, Pope 1934 treats Latin /a/ and /aː/ as originally backed, but becoming fronted... what should they be here?  
	$ given that he lists SANCTVS > shenjtë "holy, saint", this either ...
		$ (a) must be after VN coalescence, 
		$ (b) see through prior /n/, 
		$ or (c) that n must have become /ɲ/ ...?
	$ given the treatment of PAlb /ɲ/ on p1740, we can exclude (c), as it is not predicted to have emerged for this word in the post-Latin Proto-Albanian stage
	$ we'll formulate the rule to simultaneously entertain (a) and (b) by using an optional nasal placed intermediately for hte prior conditioning
		$ as it is not among the listed sources of this. 
$ first part -- conditioning on front vowel or /a/, then /t/; using [-stres,-round] ([-stres] implies [+syl]), as it can be assumed there was no front round vowels yet.  
k > j / __ [-stres,-round] t
$ second part -- prior conditioning
k > j / [-stres,-round] ([+nas]) __ t

$part I of DV1736.G1 / DV2.2.1L1 has PPAlb ō and Lat ō, as well as Lat o, ultimately becoming *uo before word-final {ɫ,n,r,j}. For this to happen, they cannot be fronted to ø -- as is about to happen to long oː. At the same time, De Vaan does not list a *ɫ in Proto-Albanian or Proto-Albanian, though its sources are clear, coming from a PAlb *lː (DV1739~3.1E), itself with identifiable Pre-Proto-Albanian and Latin sources (DV1740~3.2F, cf. also -E). Makes sense to gather these as /lː/ for now, for the baseline cascade, before this rule. The *Rl aspect of it seems to come after consonantal reductionsː see De Vaan's listing of Latin PARABOLA > përrallë for DV1740~3.2F2. 
$note that this is not listed for the reflex of PPAlb *ā, which is currently *ɒː, but alas this item *does* get fronted to ø under i-mutation in DV2.2.1B7.
$TODO make sure the relevant rules concerning laterals are all placed before this! -- can remove when that is done. 
$What we need to do here: ensure that the relevant words can pass to *uo, and won't be bled by fronting to *ø, and we do this by effectively merging them into *ɒː, the reflex of PPAlb *ā. Use *lː for ɫ for now. Allow presence of unstressed non-low vowel (which will fall before long), and a possible nasal following it, to express what will become final position, as they might not have fallen yet by this stage. 
[+round,+syl,-hi,-lo,+long] > [+lo] / __ {lː;n;r;j} ([+syl,-stres] ([+nas])) 


$ TODO for reconsideration of the above... The listed words are: 
	$ /o/: solum > shuall "sole" 
	$ /oː/: cotōneus > ftua "quince", dracō (likely the accusative dracōnem) > drangue, duar (< ghesr- ...), and muaj. 
$ Albanian duar rather seems to reflect a *ɔː (> o) from *aː, that is not at risk of merging; muaj is unclear, but Latin oː clearly needs to be handled here
$ other relevant cases: 
	$ in oːn- : Latin capōnem > kapua "rooster", lacōnem > lëkue "water lily", leōnem > luan "lion" (corōnam > kurorë "crown, garland; wealth" is a later loan per Orel 2000(:33)), Antōnius > Ndue "Anthony", falcōnem > fajkua.
		$ cases where fronting does appear to occur: ratiōnem > arsye "reason" 
	$ in practice it doesn't seem this happens much before -ll and -r at this stage for hte long oː but were going with this for now out of faithfulness .
		$TODO: remove this commentary from baseline 18 cascade once decisions are made for DiaCLEA, move it there. 

$ De Vaan 1736 "1." + DV1736~A1&A3 (on Lat & PPAlb ū) + DV1735~A7&A8 (on Lat & PPAlb ō) - long back vowels fronted -- listing only the round ones and not including ɒː (incl. from PIE & AGk aː)-- in effect, he seems to mean the non-low long back vowels ones. 
[+back,+long,+syl,-lo] > [+front,-back]

$ De Vaan p1736 "2." +DV1735~A1&A2: PPAlb & Lat ai (incl ae?) > ē
$ based on treatment of Lat. ae elsewhere, where it falls in with Latin *short* e, it seems not, but this is bled already anyways so no need to change this rule at the moment (as of Aug. 1 2023) 
[+lo,+syl,αstres,βprim] [+front,-cons,-syl] > [-lo,+front,+long,αstres,βprim] ∅

$----- early aspects of vowel reduction and falls ----- 
$bandaid implied elsehwere -- strip final s in inflectional endings, and then nasals, in that order
s > ∅ / [-stres] ([+nas,+cons]) __ # 
[+nas,+cons] > ∅ / [-stres] __ #

$ DV2.2.2c "at an early stage" internal unstressed post-tonic vowels go to schwa, some soon to be lost. 
$ originally formulated here so as to not count items with inflectional ending consonants (e.g. accusative -m) as "internal" : [-stres] > ə / [+prim] (@)* __ ([-syl])* [+syl] -- but now this is no longer necessary(?)
[-stres] > ə / [+prim] (@)* __ @ 


$--------------------Middle Proto-Albanian-------------------
=Middle Proto-Albanian
$ main wave of contact with Proto-Romanian (temporarily?) complete now
$ evidence from the loans indicates that around this time, the reflexes of hte PIE palatovelars in Alb should be around ts/dz (evidenced mainly by Aromanian as these deaffricate in Romanian), tentatively before the merger of PPAlb a: into o is complete (cf. mazăre for Alb modhull, rață for rosë "duck"), before the passage of PPAlb tʃ dʒ to s z (ciută -- sutë etc...), after the retraction of post-vocalic s (mosh "old") but before the same impact on cluster s inlcuidng in Latin loans (strunga-shtrungë; Lat fossātum > ORom fsat, Alb fshat, Lat spodium > Alb shpuzë > Rom spuza), tentatively after the emergence of some schwa (Rom nǎpârcǎ -- Alb nëpërkë "adder"), after the emergence of Albanian suffix -zë, perhaps after the emergence of the Albanian postposed article in -të (Drobeta), at a point when PPAlb w is in the stage of [β] (Rom abur -- Alb avull "vapor", vatra-vatër) which closes to /b/ in Romanian just like PPAlb /ð/ (< intervocalic d) goes to PVlach /d/

$ resolution of DV1744.D & DV1744.E1 -- see notes on this above, this is motivated by the outcomes in Aromanian and Romanian of PPAlb ɟ͡ʝ vs. PPAlb d in cases where they both ended up as ð in Alb. 
{t͡s;d͡z} > {θ;ð}

$ De Vaan p1736 "3." + DV1735C1 (PPAlb *ā)+ DV1739.A4 (on Gk mākhānā > mokër, but via PPAlb *ā) -- completion of ā > o phenomenon, via raising of ɒː to ɔː -- thus completing "ɑː > ɔː" as in his enumerated "3." at the bottom of 1736. 
[+round,+syl,+long] > [-lo,-tense]

$ 4 NEW VOWEL SYSTEM. loss of distinctive vowel length leading to "system"
$the following system will emerge per chart at bottom of 1736 -- filling changes not already handled before this point.
	$ (*ī>) /i/ 		(*ū >) (/u/ > /y/)
	$ (*i>) /ɪ/		(*u>) /ʊ/
	$ (*ai, *ē) > /e/  	(PPAlb *ō, Lat. o & ō >) o > ø	
	$ (*e) > /ɛ/ 		(PPAlb *ā, Lat. o & ō >) ɔ > o  
	$ (*a) > /a/ 

	$ he lists "Lat. o & ō" for both but this will be handled per the more indepth descriptions as supplied in the listed changes further above as appropriate. Ie DV1735A has really mainly Lat. ō going to ø > e... 

$handling the posited emergence of high lax vowels from older short high vowels as part of p1736's new vowel system.. Include also his e > ɛ shift here (listed above), and this will give us also o > ɔ too (not ʏ or œ since short versions of y and ø have no way to emerge at this stage.); the outcome of PPAlb/Greek ā (> ɒː) is already ɔː here but he mentions some Latin o & oː passing through "ɔ > o"; unclear when it raises again. 
[+hi,+syl,-long] > [-tense]

$then distinctive length is lost in vowels
$this effectively implements: DV2.2.1A2, part of DV2.2.1A4, DV2.2.1A6, DV2.2.1B3, part of DV2.2.1B4-8, DV2.2.1B10, part of DV2.2.1C4, part of DV2.2.1E1, DV2.2.1E3, part of DV2.2.1F1 & F3. 
[+syl] > [-long]

$DV2.2.1A4.II -- resolving raising before "sh" (which might still be [s] in this cascade) for Latin ē and PPAlb *e in this position (earlier lengthened to feed this, now both to [e] as the short variants are now [ɛ]) 
$TODO FOR DIA: note above that this may be more accurately captured as __ ʃj than simply __ ʃ , given eshkë, kreshmë, rrjesht and veshk. 
[+stres,+tense,+front,-lab] > [+hi] / __ [+cont,-lab,+strid]

$ raising of ɔ to o seems implicit here as a PAlb *ɔ is not handled for following rules concerning words were it is supposed to have arisen... -- i.e. > ø under i-mutation (5a.iii on p1736; 1735DV.A6 on this for reflex of PPAlb aː), seen also in the formulation of o-breaking rules (DV1736~G1 & G2)... 
$ This can be handled in tandem with the raising of /ʊ/ back to /u/, which occurs for the reflexes of both Latin U and PPAlb *u (DV1735~2.2E1, -E2)
[+back,+syl] > [+tense]

$ It seems there is a difference between native and Latin *i outcomes --  DV1734~2.2A1: the former all end up as PAlb *i, but in DV1735~2.2A5 Latin /i/ only becomes PAlb *i with i-mutation, otherwise becoming *e (DV1735~2.2B11) 
$ TODO FOR DIA -- note that the data suggests it might be more complicated here... 
$ inasmuch as this is mainly a Latin to Albanian cascade endeavor at present, and no specific examples were given for native PPAlb *i having a different outcome from Latin I, precedence is given to the developments described for the latter.
$ This differs from the outcome for /ʊ/ from Latin or PPAlb *u, which both raise back to /u/ (DV1735~2.2E1, -E2), as seen with /ɔ/ to /o/, handled above. 
$ this thus implements DV2.2.1B11
[+syl,+hi,-tense] > [-hi,+tense]

$I-MUTATION HERE, since it can feed ietation/diphthongizations (in case of PPAlb a: > ɒː > ... > ye) and also bleed them. 
$this implements DV2.2.1A3,  DV2.2.1B4, DV2.2.1F2, 
$this is also part of the implementation of DV2.2.1A5,DV2.2.1B6, DV2.2.1L1, and DV1737's 5b.II 
$the contextual trigger for this is left somewhat vague, but examples given include __ n t ī, __ C j, __ C ɛ, __ C {ɪ/e}... so the context can be what is C j, ʎ/ɲ, i e ɛ ɪ here.  (ʎ and ɲ arenot listed, but the way this is currently ordered, they have already emerged -- TODO might want to interrogate that; but it actually makes the rule simpler to include them as the contextual trigger need not be +syl or even -cons) 
$it can be assumed this is intended as a law targeting stressed vowels, because it is placed in 2.2.1 "The stressed vowels of PAlb".
$TODO IMPLEMENT FOR DIA : prior labial consonants seem to block i-mutation ! 
$TODO IMPLEMENT FOR DIA : ē s (i,e,j) also is an i-mutation targetǃ
{ˈɑ;ˈo;ˈu;ˈe;ˈɛ} > {ˈe;ˈø;ˈy;ˈi;ˈi} / __ ([-syl])* {j;[+front,-round]}

$TODO NOTE FOR DIA: although phonemic nasalization is assigned a later point in the relative chronology (DV1737, number 8), it may be necessary here at least for /e/ and/or /ɛ/, to block ietation and allow the merger of DV2.2.1K with DV2.2.1L1 & DV2.2.1M (aka the merger of 5b.1 with 5b.2 and 5b.3)

$IETATION and DIPHTHONGIZATION follows. 
$DV2.2.1K and 1737's 5b -- diphthongized ietation -- ɛ (< PPAlb e, Lat e & ae) > ie before "word-final ɫ, r" ; he also attributes this to *e
$his ɫ is "lː" here though and his r is simply a short r so it is a diagonal grouping in terms of length, hard to capture in a feature matrix. 
$it says word-final but the falls of unstresesd vowels are actually assigned later (to word-internal and initial cases that is; the dating of the fall of final unstressed vowels isn't quite given in 1737-8 but one can assume this will happen to low vowels so this is added in : ([-lo,-stres] (m) ), the [m] being there to deal with the accusative (cf DV1737~2.2.2d) 
[+front,-hi,-lo,-round,+prim] > ˈi e̯ / __ {lː;r} ([-lo,-stres] (m)) #

$ DV1737's 5b.2 & 5b.3 : ø > ye and o > uo before word final -ɫ, -n, -r
$ these are also part II of DV2.2.1L1, L2 and 2.2.1M ... but the conditioning appears slightly different for those? 2.2.1M, generating PAlb *ye, is attriubted for "PPAlb. ō + i-mutation, Lat. jō" whereas the table earlier on 1737 treats all Lat & PPAlb ō as becoming ø̄ 
$ the blocking of fronting of PPAlb and Lat ō is currently implemented in "part I" of DV2.2.1L1 & DV2.2.1M, above, via merger into ɒː (which before long raises)
$ TODO check this ^
$ per DV2.2.1M, glided j gets absorbed into ø here. 
$ TODO check this^ IMPLEMENT FOR DIA -- remove the (j), because this is better handled via tj > tʃ > s. 
$ regarding the word-finality, same factors apply as above in DV1737~5b.1
{ˈo;j ˈø;ˈø} > {ˈu o̯;ˈy e̯;ˈy e̯} / __ {lː;n;r} ([-lo,-stres] (m)) # 

$ DV1736's 5a.1 : *ɛ > jɛ ietation (my word)
$ = DV2.2.1B2 
∅ > j / __ ˈɛ

$ DV2.2.1B1 : but no ietation in the context CL __ 
j > ∅ / [-cont] [+cor,+son,-nas] __ ˈɛ

$DV1737's 5b.iv: *o > *uo/# __ {r,lj},
$this is also DV2.2.1L2 as concerns Latin o
ˈo > ˈu o̯ / # __ {r;l j;ʎ}

$DV1737's 5b.v: *ø > *ye / __ (w) V
$ formatted to allow /w/ to have become [β]
ˈø > ˈy e̯ / __ ([+lab,-syl,+cont,+voi]) [+syl]

$ a-mutation -- DV1736's 5a.2, also DV1735~ 2.2C2 + de Vaan 2004: 78--83. --  e (or ɛ it seems?) instances lower to a under the influence of /a/ in next syllable it seems. -- but per De Vaan 2004(78-83) this doesn't happen to Latin (and indeed the data largely matches this), and this is handled above in DV2.2.1C2. 
$[-hi,-round,+syl] > [+lo,-tense] / __ ([-syl])* [+lo,+syl]

$ DV2.2.1C3 -- Lat AU and PPAlb *au (falling diphthong of either w or ʊ̯ , the latter from the bandaid in late PPAlb) become a , but not early enough to trigger i-mutation (and likely also after contact with Proto-Vlach?)
[-syl,-cons,+round] > ∅ / [+lo,+syl] __

$ DV 1737's 6. ø > e; implements final parts of DV2.2.1B6-8.
[+front,-cons,-hi] > [-round]

$TODO, EPSILON NOTE: from this point onward, De Vaan uses *e, but the difference between *e and *ɛ is not meaningful (any longer), and the gold outcomes in ALLex feature /ɛ/, so we will have to at some point move (or merge) these to/as ɛ -- probably at the end.
$ likewise, for o and ɔ
$bandaid here thus inserted
[+syl,-lo,-hi] > [-tense]

$ DV 1737's 7. Unstressed word-internal vowels to schwa, unstressed initial to zero-- include in _- VOWEL DROP WAVE -_

$ --- Second wave of early vowel reduction phenomena here --- 

$ DV2.2.2a -- in absolute initial position, all vowels reduce to schwa, on their way to zero (except in __ RC in Buzuku) 
$ TODO FOR DIA consider suppressing the Buzuku rule here. 
[-prim] > ∅ / # __
∅ > ə / # __ [+son,+cons] [+cons]

$ DV2.2.2b -- internal pretonic vowels "including *au" (now > *a per DV2.2.1C3) to schwa, some of these to fall soon. "These reductions also affected the oldest layers of loanwords from Middle Greek, Italian, and Slavic" -- so will be repeated later just after the point for Old Northern Tosk Albanian. 
[-prim] > ə / @ __ (@)* [+prim]

$TODO the various unstressed vowel drops occur somewhere around here. -- this is 1737 "7.", and covered extensively in 2.2.2 

$In 2.2.2b, it is unclear what determines the drop of pretonic schwa, but based on the given examples, conditions for drops at this stage include (i) n __ C with assimilation of the /n/ (mbesë < nepōtia; shëndet < sanitātem), (ii) k ə t > f t. -- This latter one will be handled in the later kt > ft shift as "2.2.2b.iii"
$ note that some are dropped later -- note Early Modern Tosk vëllezër, vullëndet, mallëkon "to cures", arësye "reason" etc.
$TODO FOR DIA -- want to handle place assimilation of the n here too -- like:  n (ə) > [αant,βcor,ɣlab,ðhi,ɛback,ɸfront] / __ [-cont,αant,βcor,ɣlab,ðhi,ɛback,ɸfront]
ə > ∅ / n __ [-cont]

$ end of this wave of vowel drops _- VOWEL DROP WAVE -_

$ regressive obstruent devoicing assimilation on v (< De Vaan's PAlb β < w- DV1744.B6 = DV4.2I6 -- vicinus > fqinj) but simpler to handle this way without an unnecessary β step). Can be broadened for others that this is implied for (praebyter > prift, etc)
$ will be reversed by post-nasal stop voicing below. 
[-son] > [-voi] / __ [-voi] 

$ DV1744.B5-- k > f before t (in places not touched by rule of DV1744.J3) --- 
$ this includes initial position after the loss of unstressed first syllable vowels (he gives cotoneus > ftua as an example) 
$ DV1744.B4 -- also k > f before s with same qualifications. 
$ this can be jointly handled with the same development before /s/ (which is understood to not yet be ʃ)
$ and the same development for pt to ft (DV1744.B3), which also absorbs (b) implying a regressive devoicing in praebyter > prift (example given in DV1744.B3) 
$ k > f aspect is bled before front vowels by k > j phenomena it seems (DV1744J3)
$ De Vaan does not include ps > fs(h) -- data seems inconsistent as there is gripsa > grifshë but psh- outcomes in supsīritāre > psherëtij and supsīrium > pshirë. 
$ handling DV2.2.2b.iii (kˌət  >ft ) here too. 
p > k / __ t
{k ə;k} > {f;f} / __ {t;s}

$ post-nasal stop voicing. De Vaan attributes this to Proto-Albanian, for Latin and native words alike for -p- (DV1743.B2, .B4) and -t- (1743.D2 = 4.2D2), while treating Latin loans alone for k > g / n __ (DV1744.A1, .A3)
	$ De Vaan's handling of /p/ is given the same time betweeen native and Latin strata, but not the
		$ same conditioning environment. 
	$ TODO need step to preserve Latin/non-Latin differences if this if expanded for PIE > Alb run.
$ he handles nt > nd together for native and Latin, with the conditioning "n __ in  a pretonic or stressed syllable"; his examples also include cases where it is the coda of a stressed syllable (dhëndër, kundër), and those where it is the onset
$ This is placed into the period before the earliest Slavic loans enter as benefit of the doubt, since that's still Proto-Albanian for De Vaan. (except by technicality the proposed precocious pre-rhotic Slavic loans, if they are considered to be a legitimate layer) 
$ TODO note however the possible case of Angevin encant > ankand (Marr 2023) 
t > d / n __ ([-syl])* [+stres]
t > d / [+stres] ([-syl])* n __
$ mp > mb and nk > ng everywhere they occur.
[-cont,-cor] > [+voi] / [+nas] __ 

$DV4.1N (=DV1742I) OAlb f < PAlb θ / C __, including OAlb ënfle -- cf Matzinger 2006: 71 -- Matzinger, Joachim. 2006.  anische Text Mbsuame e Kreshterë (Dottrina cristiana) des Lekë Matrënga von 1592. Eine Einführing in die albanische Sprachwissenschaft. Seems to be in all dialects? 
θ > f / [+cons] __

$DV4.2E & DV4.2F3 -- wave of palatalization, occuring before front vowels, including fronted former long round vowels (y, ø) but not including reduced vowels.  Absorbs /w/. 
w > ∅ / [+back,-cont] __ [+front,-lo,-cons]
[+back,-cont] > [-back,+front] / __ [+front,-lo,-cons]

$ DV1744.H ~ s becomes ʃ -- for s in reflexes of Old Greek (presh < prason), Latin, and the earliest Slavic loans (grusht, shkrap) becomes ʃ (1744.H) -- but this is not fed by tʃ becoming s (DV1744.F and 1744.G) 
s > ʃ

$DV2.2.1C5: Latin short e > a in "q, sh" __ "rr, l". No explicit word on the dating of this except that it is between post-Latin PPAlb, and PAlb; the forms used (q, sh,... rr, l) suggest a later date but at first inspection it seems to precede the merger of ae to short e (caelum > qiell) which certainly must have been before k > q (=[c]). So it is placed right after "rr, l" emerged (with what would become dark l now being long l, and rr being long r)
$no clear way to block this for PPAlb *e, so this will need to be fixed if errors arise (TODO) 
ˈe > ˈɑ / {k;[+cor,-lab,+cont]} __ {l;rː}

$ dj and tj merge into PAlb dʒ and tʃ, feeding their passage to z and s (DV1744.F1 = 4.2M1, 1744.F2 = 4.2M2, 1744.G1 = 4.2N1, 1744.G3 = 4.2N3) 
[+ant,+cor,-cont] j > [-ant,+distr,+delrel] ∅

$bandaid -- fronting of remaining low vowels at this point, because the lexicon has modern Albanian low vowels as front. 
[+lo] > [+front,-back]

$ ---------- Pre-Slavic final vowel phenomena -- 

$DV1738, top, part 1: final -V(s) and -oi (> ī ?) without stress fall 
$in effect, this is non-low-vowel unstressed final syllables closed by inflectional endings. 
$form prior to 8/5/23 was: [-stres] {m;s} > ∅ / __ #
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved. 
$ note that -stres implies a vowel if we are using the default feature definitions and implications (as is intended for this cascade), as the feature [stres] is unspecified unless it is [+syl] 
{m;s} > {∅;∅} / __ #
[-stres,-lo] > ∅ / __ #

$DV1738, top, part 3: final -ja(s) to e, clearly bleeding part 2 below. 
$form prior to 8/5/23 was: j a (s) > e / __ #
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved. 
{j a s;j a} > {e;e} / __ #

$DV1738, top, part 2: final -a(m/n)(s) to ë 
$form prior to 8/5/23 was: a ([+nas,+cons]) (s) > ə / __ #
$changed to sidestep then-current input-side issues in DiaSim. TODO consider restoring when these are resolved. 
{a m s;a n s;a s;a} > {ə;ə;ə;ə} / __ # 

$DV1738, top, part 4: final -a + jˌa (def FSG) > a 
a j > ∅ / __ ˌa #

$DV1738, top, part 5 -- final countertonic -is, -ei (def rt msg) to >i, but it appears this is accomplished by other rules. TODO check this if necessary. 

$DV1738, top, part 6: final -i without primary stress > -u after velars. (but in practice this will be mainly be the (secondarily stressed?) -u of the definite masculine nominative?) 
[+hi,+front,-prim] > [-front,-back,+round] 

$ -------- rise of long vowels -------
$ De Vaan places this between Proto-Albanian and modern PAlb but it seems clear that it is intended to represent a pan-Albanian development

$ DV1734.1.I -- long vowels that arise through "internal contraction" 
$previously assumed this meant with schwa and/or homoorganic vowels for now, put per conference with De Vaan 8/9/23 -- to be on the safe side do it for all vowels; 
$ version before 8/5/23: 
	$ {ə;ˌə;[-prim,αhi,βlo,ɣround,ðfront]} [+syl] > ∅ [+long] / @ __ @
	$ [+syl] {ə;ˌə;[-prim,αhi,βlo,ɣround,ðfront]} > [+long] ∅ / @ __ @
$ had to change to sidestep input-side issues then-current in DiaSim. TODO consider restoring. 
$ version before 8/9/23 was these four rules, before changing implementation to cover all vowels that have come into contact
$	[-prim,-lo,-front,-back] [+syl] > ∅ [+long] / @ __ @
$	[-prim,αhi,βlo,ɣround,ðfront] [+prim,αhi,βlo,ɣround,ðfront] > ∅ [+long] / @ __ @
$	[+syl] [-prim,-lo,-front,-back] > [+long] ∅ / @ __ @
$	[+prim,αhi,βlo,ɣround,ðfront] [-prim,αhi,βlo,ɣround,ðfront] > [+long] ∅ / @ __ @
[-prim] [+prim] > ∅ [+long] / @ __ @
[+prim] [-prim] > [+long] ∅ / @ __ @

$DV1734.1.III compensatory lengthening
$ based on examples in DV2.2.2b and 2.2.2c, posttonic vowels seem to be lost at this point in the context R __ T, with lengthening of a prior vowel if it is stressed. (amita > emtë, manica > mëngë, veritātem > vërtet , spīritus > shpirt; vs. orphanus > varfër, epíscopus > peshkëp, contrā > kundër, tjetër < -étero-, sherbëtuor, ;
$ --not near -ll- it seems so -long,-back to be safe :  maledicere > mallëkoj but also mallkoj?; likewise voluntātem > vull(ë)n(d)et ; note also Buzuku's sonëte -- but there might be analogical-lexical reasons for that as it is so - nate?) 
$TODO reexamine this? 
[+prim] > [+long] / __ [+cons,+son,-long,-back] ə [-cont]
ə > ∅ / [+cons,+son,-long,-back] __ [-cont]

$DV1734.1.IV -- 'lengthening before nasals liquids sibilants'
[+prim] > [+long] / __ {[+cons,+son];[+strid]}

=Late Proto-Albanian

$------- continued rise of long vowels -------------
$DV1734.1.II -- long vowels that arise through contraction in final position with *-ë and -i, the latter with apparent fronting but while illustrated in provided examples this apparent fronting is not stated as part of the development by De Vaan 2018, perhaps because it can be handled anyways by i-mutation. Gheg preserves -aë# and -oë# longer and makes them into vowels in some dialects ([æ], [ø]), so this is placed after the split of Proto-Albanian 
$ this rule is formulated to capture not only non-primary stressed i and ə but also e -- this is simpler and has no issues as far as I'm aware -- TODO examine this for errors if necessary though. 
[+syl] [-prim,-round,-lo] > [+long] ∅ / __ #


$DV4.1V3 -- lk > jk -- some variation (bujk/ bulk for "peasant", OAlb attests ulk) but seems (??) pan-Albanian in nature? 
$$ dialectal evidence suggests that this originally first passed to ʎ: Huld 1976 p 197 for ujk shows that uʎk- forms in Arvanitika and Arbereshe (Sal, Vacc, Falc), and Huld reasonably asserts proto-Albanian had either or uʎk- or ulk- when it split. This is perfectly compatible with hte rest of De Vaan 2018 (which has ʎ go to j later), and is not a new conclusion, so the version supported by Huld is implemented here for now.
$MOST FAITHFUL VERSION: l > j / __ k
l > ʎ / __ k

$DV4.1E2 & DV4.1F2 -- iotation of l after velar stops. This does not occur in some southern varieties, such as Cham and some Arbereshe dialects, so it could be that it occurred after Proto-Tosk split (in the broad sense, i.e. Proto-Southern-Albanian), or that Proto-Southern-Tosk retracted *ʎ to *l after velar stops. The outcome in Arvanitika is ʎ; in Arvanitika (and the other varieties where ʎ occurs after velars?), ʎ elsewhere appears to be preserved -- cf. Arvanitika biʎë "daughter" noted in De Vaan 2018 (:1740).
$ DV1743.F5 -- -c(u)l- > c > ɟ if after nasals in ungj < avunculus -- effectively handled here and with the earlier voicing of k > g in the earlier Middle Proto-Albanian post-nasal voicing shift.
l > ʎ / [-cont,+hi] __

$ DV4.1B2 : b inserted between m and the word bound.-- cf. also Bonnet 1998: 195 
∅ > b / m __ #

$ vowel nasalizations -- last of major vowel developments per DV1737 
$ implementing: DV2.2.1G1-2, DV2.2.1H1-2, DV2.2.1I1-2, DV2.2.1J1 
$ although nasalizations of ỹ, õ are not explicit, they are not explicitly excluded either, and it is simpler in terms of rule formation to include them. TODO reexamine this in case it may cause problems.
[+syl] > [+nas] / __ [+nas,+cons]

$ DV4.1W2 = DV1742R2 -- h prosthesis from PAlb into modern Alb. 
$ may not be deterministic (may have originated in hypercorrection), but per conference with De Vaan- - inclusion so as to test it (8/9)
$ TODO note for DIA -- many examples actually have an /r/ after the vowel... (hark, harmëshor, harron...) 
$ Placed pretty early as affected words seem to be pretty widely so
∅ > h / # __ [+syl]

$ DV4.2T = DV1742O -- labiodentalization of β
$ incorporating ɸ here too. 
$ placed between PAlb and modern Alb by DV´18 but could probably be placed earlier as this does seem to be pan-Albanian? 
[+lab,+cons,+cont] > [+strid]

$DV4.1U2 = DV1742P2 -- voicing assimilation of ʃ before voiced consonants to modern ʒ -- has to be before end of the fall of lenited stops (in this case β) 
ʃ > [+voi] / __ [+cons,+voi]

$ dʒ and tʃ pass to z and s -- whether from PPAlb dʒ/tʃ or from reflexes of Latin loans in dj-, tj (DV1744.F1 = 4.2M1, 1744.F2 = 4.2M2, 1744.G1 = 4.2N1, 1744.G3 = 4.2N3)
$ This effects also the earliest Slavic loanwords : e.g. poroçit > porosit "to request", sul "small boat" , etc. 
[-ant,+distr,+delrel] > [+ant,-distr,-cont]

$ DV4.2P *x to *h -- this is listed as a PPAlb to PAlb change, but it is placed here as it also seems to effect Slavic loans as well, and has somewhat different outcomes in (some) Gheg where Tosk -h ends up corresponding to Gheg -f  
x > h 

$ DV4.1B3 & Bonnet 1998:193 -- *Tosk* insertion of b between m and unstressed vowels
∅ > b / m __ [-stres]

$DV3.1G1 : Tosk rhotacism -- "dated 800-1000 CE, Janson 1986: 190-211". 
$ TODO NOTE FOR DIA : this may not be happening after [i]
$ TODO NOTE FOR DIA : note that this may have to precede some vowel drops though -- note the example inimīcvs > armik (which is given by DV'18: 1739), though maybe ə was retained between n-m (note cited form anëmik) 
n > r / [+syl] __ [+syl]

$DV3.1H2 : -rn- > -rr- / V __ V . This happens in Gheg and Tosk, but De Vaan 2018, citing Janson 1986(:97f), argues it is post-Slavic. Inasmuch as it happens in Gheg, it is also independent of Tosk rhotacism, and should thus be handled separately.
r n > rː / @ __ @

$DV3.1A2 -- beta to m before "VN$". 
$TODO Might be issues with the dating of this, as it assumes beta has emerged but has not yet passed to /v/ (all the cases listed are where beta reflects Latin /w/), but it also assumes the /n/ is still present in this ve:nsi:ca despite nasal-spirant stuff... unless this word was loaned in another wave? Some examination may be necessary. Ambiguity between beta and /v/ and even /w/ intentionally allowed in the formalism here. May need to be placed much much earlier into Antique Proto-Albanian. $ TODO Syllable break handled with a consonant for now. This may need to be examined. 
[+lab,+cont,-syl] > m / __ [+syl] n [+cons]

$DV3.1E -- l: passes to dark l.
$ This is actually pan-Albanian but it is placed as a PAlb to Modern Alb change DV'18. 
$ TODO consider moving it earlier, or doing away with l: entirely and instead work with dark l
lː > lˠ

$DV3.1B2 n: to n
nː > n

$BANDAID fix-- since the notation of the data uses ɾ and r not r and rː, this is implemented here, even though DV2018 has a modern Alb r and rː 
r > ɾ 
rː > r

$ ã raises to ə in Tosk (ultimately denasalizing to ë outside of some Lab subdialects which may (or may not) have preserved nasality, maybe for this item) 
[+lo,+nas,+syl] > [-lo,-back,-front,0tense]

$DV2.1D2 -- uo > ua 
{ɔ;ɔ̯} > {a;a̯} / [-cons,+round,+hi] __

$DV2.1F2: və > u- 
$ this might be yet earlier considering that it also happens in Gheg? Or not. 
{v ə;v ˌə} > {u;ˈu} / # __

= Proto-Tosk

$loss of vocalic nasalization: DV2.1A2, C2, completing E1, F3
[-cons,+nas] > [-nas]

$TODO FOR LAB,CHAM,ARB-,ARV- : y > i here -- DV2.1A3 

$DV4.1R2 -- final devoicing of -z
z > s / __ # 

$DV4.1V2 -- ʎ passes to j. This happens across Northern Tosk and most Lab (?) but not in some other isolated southern varieties like Arbereshe. It also seems to have affected all of Gheg but the distribution in Tosk suggests it happened in parallel later, rather than being a true shared development. 
ʎ > j

$DV4.1E / -F -- beginnings late medieval central Albanian  palatalization. This effects the reflexes of cl,gl- for all Tosk. Before front vowels, it also affects all of Northern Tosk, as well as Southern Gheg and much of Northern Gheg (more northeastern) but also effects the earlier waves of Turkish loanwords, so this part of it is placed later.
[+back,-cont] j > [-back,+front] ∅

$DV4.1J : z > dz after n 
z > d͡z / n __

$DV4.1V6 -- *c *ɟ ɲ to j before a consonant ; cf. Schumacher 2013ː 275-6. This is more characteristic of Gheg however it seems so it is suppressed for now; in any case it is not really characteristic of the Tosk-based standard. 
$ [+hi,+front,-cor,+cons] > j / __ [+cons]

$DV4.1G2 -- c retracted back to k before __ V ʃ
$TODO consider motivating factors here... 
c > k / __ [+syl] ʃ 

$repeat of internal pretonic vowel reductions per DV2.2.2b (see above)
[-prim] > ə / @ __ ([-syl])* [+prim]
ə > ∅ / n __ [-cont]

$gleaned from DV1738, unstressed final -o(n) and -a(s) in loans from early Slavic, Italian and Greek are reduced to -ë; rest seem to be effaced (?) 
$ TODO FOR DIA : consider retracting this just to -o, and have the passage of unstreseed -a to -ë only here, as the -o > -ë phenomena in Byzantine/Bulgarian/Italian seem limited to feminines, in which it could be analogical.
[-stres,-hi,+back] > a / __ #
[-stres,-lo] > ∅ / __ #
[-stres] > ə / __ # 

$DV1734.3 -- loss of length in Northern Tosk (and much elsewhere except much of Lab) 
[+long] > [-long]

= Old Northern Tosk Albanian
$ circa 1250-- layers added after this point incl. Old Italian II, Old Venetian, Old Angevin, Byzantine II, Ottoman I, Old Serbian. 

$DV4.1E / F -- further palatalization, this time occuring before front vowels -- and affecting Turkish loans as well. This happens in all northern Tosk but that it affected Turkish loans implies a later placement in the relative chronology (in Gheg it dodges some parts of the northwest zone) 
[+back,-cont] > [-back,+front] / __ [+front,-lo,-cons]

$DV4.1I : Old Albanian d + s & d + th > ts 
$merge also DV4.1K2 : OAlb d + sh > ç
$ version before 8/5/23 was : d [+cont,+cor,βant] > ∅ [+delrel,-βdistr,+strid]
$ had to change because negative alpha values are not currently supported. 
$ TODO consider restoring old version when possible. 
{d ʃ;d s;d θ} > {t͡ʃ;t͡s;t͡s}

$DV4.1K1 -- Old Alb ʃ > tʃ before a consonant 
$DV4.1K3 partially implemented here -- Tosk standard does not have c > t͡ʃ everywhere, but does seem to have it when praeconsonantal (çfarë, etc.) 
{ʃ;c} > {t͡ʃ;t͡ʃ} / __ [+cons]

~Standard Albanian

$following changes only for future dialect handling. -- DV8/9 -- "except for the nj > j in verb forms, none are in the *written standard*", many widely accepted in spoken standard Albanian  

$DV4.1V5 -- ɲ to j "often between vowels and in final position". This is a pretty modern development within northern Tosk, and the variety underlying the standard (as are many Lab dialects? But may need to check that) but in many regional northern Tosk dialects it hasn't happened. Has happened in parts of Gheg? Anyhow it is unclear if De Vaan intends to treat this as a regular sound change. In ALLex there are a number of cases where ɲ survives intervocalically (Danjell, kunjoj, shenjë, gështenjë, linjë, mënjollë, mënjë, mushkonjë, mërqinjë, panjë, rozhponjë, shushunjë, tenjë) and a few it doesn't (incuneāre > ngujoj -- but this might be from ngul instead) 
$ in final position there are two cases where it survives in ALLex : CVNEVM > kunj "spike", VĪCĪNVM > fqinj "neighbor" -- these are both after high vowels, but leave that for the Dia- cascade 
$ the only major place the standard seems to do this is in the 3sg present forms, so this is ignored before the placement of MSAlb but placed as an ongoing change afterward

$ increasingly in the 21st century spreading into Tosk; also DV4.1K3
c > t͡ʃ

$ DV3.1B3 nd > n is listed for PALb to MAlb, but this is really mostly(? only?) Gheg so it is placed here for now
d > ∅ / n __

$DV1742.M1 h > f is more of a Gheg change (and probably needs to be more finely specified) thus this cascade does not implement it
$DV1742.M2 θ > f with listed Gheg ufull for Tosk uthull (and thjeshtër/fjeshtër < FILIASTER, whatever is made of that) seems transparently more Gheg, and is perhaps not intended to be deterministic and/or needs more fine specification, so currently left unimplemented. 